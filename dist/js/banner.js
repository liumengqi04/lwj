"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}var Banner=function(){function t(e){_classCallCheck(this,t),this.ele=document.querySelector(e),this.imgBox=this.ele.querySelector(".imgBox"),this.pointBox=this.ele.querySelector(".pointBox"),this.leftRightBox=this.ele.querySelector(".leftRight"),this.banner_width=this.ele.clientWidth,this.index=1,this.timer=0,this.flag=!0,this.init()}return _createClass(t,[{key:"init",value:function(){this.setPoint(),this.copyPage(),this.autoPlay(),this.overOut(),this.leftRight(),this.changePage(),this.pointEvent()}},{key:"setPoint",value:function(){for(var e=this.imgBox.children.length,t=document.createDocumentFragment(),i=0;i<e;i++){var n=document.createElement("li");0===i&&n.classList.add("active"),n.setAttribute("index",i),t.appendChild(n)}this.pointBox.appendChild(t),this.pointBox.style.width=20*e*1.3+"px"}},{key:"copyPage",value:function(){var e=this.imgBox.firstElementChild.cloneNode(!0),t=this.imgBox.lastElementChild.cloneNode(!0);this.imgBox.appendChild(e),this.imgBox.insertBefore(t,this.imgBox.firstElementChild),this.imgBox.style.left=-this.banner_width+"px"}},{key:"autoPlay",value:function(){var e=this;this.timer=setInterval(function(){e.index++,move(e.imgBox,{left:-e.index*e.banner_width},e.moveEnd.bind(e))},4e3)}},{key:"moveEnd",value:function(){0===this.index&&(this.index=this.imgBox.children.length-2,this.imgBox.style.left=-this.index*this.banner_width+"px"),this.index===this.imgBox.children.length-1&&(this.index=1,this.imgBox.style.left=-this.index*this.banner_width+"px");for(var e=0;e<this.pointBox.children.length;e++)this.pointBox.children[e].classList.remove("active");this.pointBox.children[this.index-1].classList.add("active"),this.flag=!0}},{key:"overOut",value:function(){var e=this;this.ele.addEventListener("mouseover",function(){return clearInterval(e.timer)}),this.ele.addEventListener("mouseout",function(){return e.autoPlay()})}},{key:"leftRight",value:function(){var t=this;this.leftRightBox.addEventListener("click",function(e){e=(e=e||window.event).target||e.srcElement;if("left"===e.className){if(!t.flag)return;t.flag=!1,t.index--,move(t.imgBox,{left:-t.index*t.banner_width},t.moveEnd.bind(t))}"right"===e.className&&t.flag&&(t.flag=!1,t.index++,move(t.imgBox,{left:-t.index*t.banner_width},t.moveEnd.bind(t)))})}},{key:"pointEvent",value:function(){var t=this;this.pointBox.addEventListener("click",function(e){e=(e=e||window.event).target||e.srcElement;"LI"===e.nodeName&&t.flag&&(t.flag=!1,e=+e.getAttribute("index"),t.index=1+e,move(t.imgBox,{left:-t.index*t.banner_width},t.moveEnd.bind(t)))})}},{key:"changePage",value:function(){var t=this;document.addEventListener("visibilitychange",function(){var e=document.visibilityState;"hidden"===e&&clearInterval(t.timer),"visible"===e&&t.autoPlay()})}}]),t}();