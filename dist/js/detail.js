"use strict";function asyncGeneratorStep(n,o,t,e,s,a,c){try{var r=n[a](c),i=r.value}catch(n){return void t(n)}r.done?o(i):Promise.resolve(i).then(e,s)}function _asyncToGenerator(r){return function(){var n=this,c=arguments;return new Promise(function(o,t){var e=r.apply(n,c);function s(n){asyncGeneratorStep(e,o,t,s,a,"next",n)}function a(n){asyncGeneratorStep(e,o,t,s,a,"throw",n)}s(void 0)})}}$(function(){var e=null,s=getCookie("goods_id");function n(){return(n=_asyncToGenerator(regeneratorRuntime.mark(function n(){var t;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,$.get("../server/getGoodsInfo.php",{goods_id:s},null,"json");case 2:t=n.sent,o=t.info,console.log(o),$(".showbox").html('\n            <div class="show"><img src="'.concat(o.goods_big_logo,'"alt=""/></div>\n            <div class="movemask"></div>\n            <div class="list">\n                <p class="active">\n                    <img src="').concat(o.goods_small_logo,'" show="').concat(o.goods_big_logo,'" enlarge="').concat(o.goods_big_logo,'" alt=""/>\n                </p>\n                <p>\n                    <img src="').concat(o.goods_small_logo,'" show="').concat(o.goods_big_logo,'" enlarge="').concat(o.goods_big_logo,'" alt=""/>\n                </p>\n            </div>\n            <div class="enlargeBox" style="background-image:url(').concat(o.goods_big_logo,')"></div>\n        ')),$(".goodsInfo").html('\n            <p class="desc">'.concat(o.goods_name,' </p>\n            <div class="btn-group size">\n                <button type="button" class="btn btn-default">S</button>\n                <button type="button" class="btn btn-default">M</button>\n                <button type="button" class="btn btn-default">L</button>\n                <button type="button" class="btn btn-default">XL</button>\n            </div>\n            <p class="price">￥ <span class="text-danger">').concat(o.goods_price,'</span></p>\n            <div class="num">\n                <button class="subNum">-</button>\n                <input type="text" value="1" class="cartnum"/>\n                <button class="addNum">+</button>\n            </div>\n            <div>\n                <button class="btn btn-success addCart">加入购物车</button>\n                <button class="btn btn-primary continue">继续去购物</button>\n                <button class="btn btn-warning goCart">立即结算</button>\n                \n            </div>\n        ')),$(".goodsDesc").html(o.goods_introduce),e=t.info;case 5:case"end":return n.stop()}var o},n)}))).apply(this,arguments)}!function(){n.apply(this,arguments)}(),$(".goodsDetail").on("mouseover",".show",function(){$(".movemask").css("display","block"),$(".enlargeBox").css("display","block")}).on("mouseout",".show",function(){$(".movemask").css("display","none"),$(".enlargeBox").css("display","none")}).on("mousemove",".show",function(n){var o=parseInt($(".enlargeBox").css("backgroundSize").split(" ")[0]),t=parseInt($(".enlargeBox").css("backgroundSize").split(" ")[1]),e=$(".show").innerWidth()*$(".enlargeBox").innerWidth()/o,o=$(".show").innerHeight()*$(".enlargeBox").innerHeight()/t;$(".movemask").css({width:e,height:o});t=(n=n||window.event).offsetX-e/2,n=n.offsetY-o/2;t<0&&(t=0),n<0&&(n=0),t>=$(".show").innerWidth()-e&&(t=$(".show").innerWidth()-e),n>=$(".show").innerHeight()-o&&(n=$(".show").innerHeight()-o),$(".movemask").css({left:t,top:n});o="-"+$(".enlargeBox").innerWidth()*t/e+"px -"+$(".enlargeBox").innerHeight()*n/o+"px";$(".enlargeBox").css({backgroundPosition:o})}).on("click",".list",function(n){var o,t=(n=n||window.event).target||n.srcElement;"IMG"===t.nodeName&&(o=t.getAttribute("show"),n=t.getAttribute("enlarge"),$(".show").children().src=o,$(".enlargeBox").css("backgroundImage","url(".concat(n,")")),$(".list").children().removeClass("active"),t.parentElement.classList.add("active"))}),$(".goodsInfo").on("click",".addCart",function(){var n,o=JSON.parse(window.localStorage.getItem("cart"))||[];o.some(function(n){return n.goods_id===s})?(n=o.filter(function(n){return n.goods_id===s})[0]).cart_number=+n.cart_number+ +$(".cartnum").val():(e.cart_number=+$(".cartnum").val(),o.push(e)),window.localStorage.setItem("cart",JSON.stringify(o))}),$(".goodsInfo").on("click",".subNum",function(){var n=+$(".cartnum").val();1!=n&&$(".cartnum").val(n-1)}).on("click",".addNum",function(){var n=+$(".cartnum").val();$(".cartnum").val(1+n)}),$(".goodsInfo").on("click",".goCart",function(){var n,o=JSON.parse(window.localStorage.getItem("cart"))||[];o.some(function(n){return n.goods_id===s})?(n=o.filter(function(n){return n.goods_id===s})[0]).cart_number=+n.cart_number+ +$(".cartnum").val():(e.cart_number=+$(".cartnum").val(),o.push(e)),o.forEach(function(n){n.goods_id===getCookie("goods_id")?n.is_select="1":n.is_select="0"}),window.localStorage.setItem("cart",JSON.stringify(o)),console.log(o),window.location.href="./cart.html"}).on("click",".continue",function(){window.location.href="./list.html"})});